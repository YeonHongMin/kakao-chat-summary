# 06. Tasks & Development Roadmap

## 1. 완료된 작업 ✅

### Phase 1: 기반 구축
- [x] 프로젝트 구조 설계
- [x] `full_config.py` - 설정 관리 모듈 구현
- [x] `parser.py` - 카카오톡 파싱 모듈 구현

### Phase 2: 핵심 CLI 기능
- [x] `llm_client.py` - 통합 LLM API 클라이언트
- [x] `chat_processor.py` - 요약 처리 모듈 구현
- [x] `url_extractor.py` - URL 추출 모듈
- [x] CLI 스크립트 (full_*, simple_*)

### Phase 3: 다중 LLM 지원
- [x] GLM (Z.AI) 지원
- [x] ChatGPT (OpenAI) 지원
- [x] MiniMax 지원
- [x] Perplexity 지원
- [x] `--llm` CLI 옵션 추가
- [x] 대화형 LLM 선택 모드

### Phase 4: GUI 애플리케이션 (v2.0)
- [x] PySide6 기반 데스크톱 앱
- [x] 카카오톡 스타일 UI 테마
- [x] SQLite 데이터베이스 연동
- [x] SQLAlchemy ORM 모델
- [x] 채팅방 관리 (생성, 목록, 선택)
- [x] 파일 업로드 기능

### Phase 5: 파일 저장소 및 복구
- [x] `file_storage.py` - 파일 기반 저장소
- [x] 일별 원본 대화 저장 (data/original/)
- [x] 일별 요약 저장 (data/summary/)
- [x] DB 복구 기능 (파일 → SQLite)
- [x] 메시지 업데이트 시 요약 무효화

### Phase 6: 요약 생성 개선
- [x] 스마트 요약 (신규/업데이트 날짜만)
- [x] 요약 진행 다이얼로그 (실시간 진행률)
- [x] 취소 기능
- [x] LLM 선택 UI (드롭다운)
- [x] LLM 응답 완결성 검증

### Phase 7: UI/UX 개선
- [x] 탭 인터페이스 (대시보드, 날짜별 요약, URL 정보)
- [x] 달력 날짜 선택
- [x] 상태바 개선 (작업 완료 상태 표시)
- [x] URL 정보 탭 (추출, 정렬, 저장)

### Phase 8: 환경 설정
- [x] `.env.local` 지원
- [x] `env.local.example` 제공
- [x] CLI 스크립트 분리 (src/manual/)

---

## 2. 향후 개선 사항 📋

### 우선순위 높음 (P0)
- [ ] 테스트 코드 작성 (pytest)
- [ ] 다양한 카카오톡 버전 호환성 테스트
- [ ] 에러 핸들링 강화

### 우선순위 중간 (P1)
- [ ] 추가 LLM 지원 (Claude, Gemini 등)
- [ ] 프롬프트 템플릿 외부화 (YAML/JSON)
- [ ] 설정 다이얼로그 개선
- [ ] 자동 동기화 (APScheduler 연동)
- [ ] 요약 품질 평가 지표

### 우선순위 낮음 (P2)
- [ ] 웹 서비스화 (FastAPI)
- [ ] 다크 모드 테마
- [ ] 국제화 (i18n)
- [ ] 패키징 (PyInstaller)

---

## 3. 알려진 제한사항 ⚠️

### 3.1 파싱 관련
- 일부 특수한 카카오톡 내보내기 형식은 인식되지 않을 수 있음
- 이미지, 이모티콘은 텍스트로만 표시됨

### 3.2 API 관련
- 각 LLM 제공자별 API 키 필요
- API Rate Limit 존재 (순차 처리로 대응)
- 긴 대화는 토큰 제한에 걸릴 수 있음
- 불완전한 LLM 응답은 저장되지 않음

### 3.3 데이터베이스 관련
- SQLite 동시 접근 제한 (WAL 모드로 완화)
- 대용량 데이터 처리 시 배치 처리 권장

---

## 4. 버전 히스토리

### v2.2.1 (현재)
- 요약 필요 날짜 판단 로직 버그 수정: mtime 비교 → 요약 파일 존재 여부 확인
  - 파일 재업로드 시 모든 original mtime이 갱신되어 이미 요약된 날짜도 재수집되던 문제 해결
  - 메시지 추가 시에는 업로드 과정에서 `invalidate_summary_if_updated()`가 요약 파일을 삭제하여 정상 감지

### v2.2.0
- URL 정보 탭 고도화 (3개 섹션: 최근 3일, 최근 1주, 전체)
- URL 저장소 리팩터링 (data/url/<채팅방>/ 디렉터리)
- URL 정규화 및 중복 제거 강화 (백틱, 따옴표, fragment 등)
- URL DB 테이블 추가 (urls)
- 동기화/복구 버튼
- 채팅방 목록 메시지 개수 기준 정렬
- 파일 업로드 기본 디렉터리 설정 (upload/)
- 날짜별 요약에서 원본 대화 보기 제거
- CLAUDE.md 추가 (AI 에이전트 컨텍스트)

### v2.1.0
- URL 정보 탭 추가
- 달력 날짜 선택 기능
- 상태바 개선 (작업 완료 상태 명확화)
- 문서 업데이트 (실제 구현 반영)

### v2.0.0
- **PySide6 GUI 애플리케이션** 전환
- SQLite 데이터베이스 도입
- 파일 기반 저장소 (백업/복구)
- 탭 인터페이스 (대시보드, 날짜별 요약)
- 스마트 요약 생성 (신규/업데이트 감지)
- LLM 응답 완결성 검증
- 요약 진행 다이얼로그 (실시간 진행률, 취소)
- `.env.local` 지원
- CLI 스크립트 분리 (src/manual/)

### v1.3.0
- 2일 전(엇그제)부터 오늘까지 요약 기능 추가 (`full_2days`, `simple_2days`)
- 간결 요약(단답형/음슴체) 모드 확대 (전체 날짜/2일치)
- 타임스탬프 기반의 정확한 메시지 카운팅 로직 개선

### v1.2.0
- 로그 시스템 고도화 (`logs/` 디렉터리, 파일 로깅)
- 에러 처리 개선 (리포트 오염 방지)
- MiniMax, Perplexity, GLM 연동 안정화
- 대용량 데이터 일괄 처리 검증 (~3,800 msgs/day 처리 확인)

### v1.1.0
- 다중 LLM 지원 (GLM, ChatGPT, MiniMax, Perplexity)
- `--llm` CLI 옵션 추가
- 대화형 LLM 선택 모드

### v1.0.0
- 초기 릴리즈
- 날짜별 대화 요약 기능
- URL 추출 기능
- CLI 인터페이스
